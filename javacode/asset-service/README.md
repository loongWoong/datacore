# 数据资产服务 (Asset Service)

数据资产服务是数据中台的核心服务之一，负责数据资产的目录管理、分类评估、价值分析和全生命周期管理。

## 功能特性

- **资产目录管理**：提供数据资产的创建、查询、更新等基础管理功能
- **资产分类与标签**：支持资产分类管理和标签化管理
- **资产评估管理**：支持对数据资产进行多维度评估
- **资产搜索功能**：基于Elasticsearch提供全文搜索和高级搜索功能
- **生命周期管理**：记录资产的全生命周期事件

## 技术架构

- **框架**：Spring Boot 3.x + MyBatis Plus
- **主存储**：MySQL 8.x
- **搜索引擎**：Elasticsearch 8.x
- **缓存**：Redis 7.x
- **接口文档**：SpringDoc Swagger UI
- **构建工具**：Maven

## 服务架构

```
┌─────────────────────────────────────────────────────────────┐
│                    Asset Service API Layer                  │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 目录管理 │  │ 分类评估 │  │ 搜索接口 │  │ 生命周期 │   │
│  │ Controller│  │ Controller│  │ Controller│  │ Controller│   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                   Service Layer                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 目录服务 │  │ 评估服务 │  │ 搜索服务 │  │ 生命周期服务 │   │
│  │ Service  │  │ Service  │  │ Service  │  │ Service    │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                   Repository Layer                          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 目录仓储 │  │ 评估仓储 │  │ 搜索仓储 │  │ 生命周期仓储 │   │
│  │ Repository│  │ Repository│  │ Repository│  │ Repository │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│                   Storage Layer                             │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ MySQL    │  │ Redis    │  │ Elasticsearch              │   │
│  │ (主存储)  │  │ (缓存)    │  │ (搜索)                   │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## 核心功能模块

### 1. 资产目录管理
- 资产创建、查询、更新、详情查看
- 支持多种资产类型（表、字段、API等）
- 支持资产状态管理（活跃、废弃、归档）

### 2. 资产分类与标签管理
- 标签创建与管理
- 资产打标签与移除标签
- 支持多种标签分类（业务标签、技术标签、安全标签等）

### 3. 资产评估管理
- 资产多维度评估（业务价值、技术质量、安全等级等）
- 评估历史记录查询
- 评估趋势分析

### 4. 资产搜索功能
- 基于关键词的全文搜索
- 高级搜索（按资产类型、业务域、负责人等条件组合搜索）
- 搜索结果分页展示

## 数据库设计

### 主要数据表

1. **数据资产信息表** (asset_info)
2. **资产分类标签表** (asset_tag)
3. **资产标签关联表** (asset_tag_relation)
4. **资产评估指标表** (asset_evaluation)
5. **资产生命周期表** (asset_lifecycle)

## API接口

### 资产管理接口
- `POST /api/assets` - 创建资产
- `GET /api/assets` - 获取资产列表
- `GET /api/assets/{id}` - 获取资产详情
- `PUT /api/assets/{id}` - 更新资产

### 标签管理接口
- `POST /api/assets/tags` - 创建标签
- `GET /api/assets/tags` - 获取标签列表
- `POST /api/assets/{assetId}/tags` - 为资产打标签
- `DELETE /api/assets/{assetId}/tags/{tagId}` - 移除资产标签

### 评估管理接口
- `POST /api/assets/evaluations` - 创建资产评估
- `GET /api/assets/evaluations/asset/{assetId}` - 获取资产评估历史
- `GET /api/assets/evaluations/trend/{assetId}` - 获取资产评估趋势

### 搜索接口
- `GET /api/assets/search` - 全文搜索资产
- `POST /api/assets/search/advanced` - 高级搜索资产

## 部署说明

### 环境要求
- JDK 17+
- MySQL 8.x
- Redis 7.x
- Elasticsearch 8.x

### 部署步骤
1. 初始化数据库，执行建表脚本
2. 创建Elasticsearch索引
3. 修改`application.yml`配置文件，设置正确的数据库、Redis、Elasticsearch连接信息
4. 使用Maven打包：`mvn clean package`
5. 运行服务：`java -jar asset-service.jar`

## 性能优化

- 数据库索引优化
- Redis缓存热点数据
- Elasticsearch搜索优化
- 异步同步数据到搜索引擎

## 安全设计

- JWT Token认证
- RBAC权限控制
- 敏感数据脱敏
- 操作日志记录